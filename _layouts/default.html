<!DOCTYPE html>
<html lang="tok">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="{{ site.description }}" />
    <meta name="author" content="{{ site.author }}" />
    <title>{{ page.title }} - {{ site.title }}</title>

    <!-- Favicon-->
    <!-- <link rel="icon" type="image/x-icon" href="assets/favicon.ico" /> -->

    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.bundle.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.3/dist/sketchy/bootstrap.min.css" rel="stylesheet">
    <link href="{% link assets/css/main.scss %}" rel="stylesheet" />

    <!-- avoids flashing issue when preferred theme is different from the default theme -->
    <script>
      function getStoredTPToggler(name) {
        const value = localStorage.getItem('tp-toggler-' + name) || "false";
        return value === "true";
      }

      function setStoredTPToggler(name, value) {
        localStorage.setItem('tp-toggler-' + name, value);
      }

      function getStoredTPTogglers() {
        return {
          sitelen: getStoredTPToggler('sitelen'),
          ligatures: getStoredTPToggler('ligatures'),
          ligatures_extra: getStoredTPToggler('ligatures-extra'),
        }
      }

      function convertTPTogglersToTPScript(tp_togglers) {
        if (!tp_togglers.sitelen) {
          return "latin";
        }

        if (!tp_togglers.ligatures) {
          return "sitelen";
        }

        if (!tp_togglers.ligatures_extra) {
          return "sitelen-ligatures-simple";
        }

        return "sitelen-ligatures-complex";
      }

      function getStoredTPScript() {
        return convertTPTogglersToTPScript(getStoredTPTogglers());
      }

      function setDocumentTPScript(tp_script) {
        document.documentElement.setAttribute('tp-script', tp_script);
      }

      setDocumentTPScript(getStoredTPScript());
    </script>

    <script defer src="https://use.fontawesome.com/releases/v6.2.1/js/all.js"></script>
    <script defer src="{% link /assets/js/sitelen-toggler.js %}"></script>
  </head>
  <body>
    {% include navigation.html %}
    
    <div class="container">
      {% include sitelen-toggler.html %}

      {{ content }}

      <footer class="fixed-bottom">
        <div class="container">
          <small>
            Copyright <i class="far fa-copyright fa-sm"></i>
            2024 {{ site.author }}
          </small>
        </div>
      </footer>
    </div>

    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
